Readme.md
.gradle
build/
!gradle/wrapper/gradle-wrapper.jar
!**/src/main/**/build/
!**/src/test/**/build/

### STS ###
.apt_generated
.classpath
.factorypath
.project
.settings
.springBeans
.sts4-cache
bin/
!**/src/main/**/bin/
!**/src/test/**/bin/

### IntelliJ IDEA ###
.idea
*.iws
*.iml
*.ipr
out/
!**/src/main/**/out/
!**/src/test/**/out/

### NetBeans ###
/nbproject/private/
/nbbuild/
/dist/
/nbdist/
/.nb-gradle/

### VS Code ###
.vscode/


#!/bin/bash

# --- Configuration (EDIT THESE) ---
CSV_FILE="path/to/your/coverage.csv"  # **REPLACE with your CSV file path**
# JACOC_REPORT_DIR="path/to/your/jacoco/report" # Not used in this version, but keep it if you might use it later
OUTPUT_FILE="path/to/your/summary.txt"  # Optional: Output file path, or leave empty for stdout

# --- Functions ---

calculate_percentage() {
  lines_covered="$1"
  lines_total="$2"
  if [[ "$lines_total" -eq 0 ]]; then
    echo "0.00%"
  else
    percentage=$(bc <<< "scale=2; ($lines_covered / $lines_total) * 100")
    echo "${percentage}%"
  fi
}

# --- Main Script ---

# Initialize counters
total_missed=0
total_covered=0
total_lines=0

# CSV Parsing (adjust field numbers if your CSV is different)
while IFS=',' read -r group package class missed covered total coverage; do
  total_missed=$((total_missed + missed))
  total_covered=$((total_covered + covered))
  total_lines=$((total_lines + total))
done < "$CSV_FILE"

# Calculate overall coverage
overall_percentage=$(calculate_percentage "$total_covered" "$total_lines")

# Summary String (Table Format)
summary=""
summary+="---------------------------------\n"
summary+="| Metric          | Value       |\n"
summary+="---------------------------------\n"
summary+="| Lines Covered   | $total_covered    |\n"
summary+="| Lines Missed    | $total_missed     |\n"
summary+="| Total Lines     | $total_lines      |\n"
summary+="| Overall Coverage| $overall_percentage |\n"
summary+="---------------------------------\n"

# Output
if [[ -n "$OUTPUT_FILE" ]]; then
  echo "$summary" > "$OUTPUT_FILE"
  echo "Summary written to: $OUTPUT_FILE"
else
  echo "$summary"
fi

exit 0
